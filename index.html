<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Hero Campus Challenge – Vinictore</title>

<script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.min.js"></script>
<script src="pdf.js"></script>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #f4f4f4;
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.header {
  text-align: center;
  padding: 10px;
}

h1 { margin: 4px; font-size: 24px; }
h2, h3 { margin: 2px; font-weight: normal; }

#book-container {
  flex: 1;
  display: flex;
  justify-content: center;
  align-items: center;
}

#book {
  width: 420px;   /* A4 portrait ratio */
  height: 595px;
}

.page {
  background: white;
  display: flex;
  align-items: center;
  justify-content: center;
}

.page img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}
</style>
</head>

<body>

<div class="header">
  <h1>Hero Campus Challenge Season 10 Business Track</h1>
  <h2>Vinictore — SIBM Pune</h2>
  <h3>Astha Pragya, Palak Bhatia</h3>
</div>

<div id="book-container">
  <div id="book"></div>
</div>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc = "pdf.worker.js";

const pageFlip = new St.PageFlip(document.getElementById("book"), {
  width: 420,
  height: 595,
  size: "fixed",
  showCover: true,
  mobileScrollSupport: false,
  usePortrait: true,   // SINGLE PAGE MODE
  maxShadowOpacity: 0.3
});

const pdfUrl = "Hero-Campus-Case.pdf";

async function loadBook() {
  const pdf = await pdfjsLib.getDocument(pdfUrl).promise;
  const pages = [];

  // FRONT COVER
  pages.push(createPage("cover.png"));

  // ALL PDF PAGES
  for (let i = 1; i <= pdf.numPages; i++) {
    const pdfPage = await pdf.getPage(i);
    const viewport = pdfPage.getViewport({ scale: 2.2 });

    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");

    canvas.width = viewport.width;
    canvas.height = viewport.height;

    await pdfPage.render({
      canvasContext: ctx,
      viewport: viewport
    }).promise;

    const imgSrc = canvas.toDataURL("image/jpeg");
    pages.push(createPage(imgSrc));
  }

  // BACK COVER
  pages.push(createPage("cover.png"));

  pageFlip.loadFromHTML(pages);
}

function createPage(src) {
  const page = document.createElement("div");
  page.className = "page";

  const img = document.createElement("img");
  img.src = src;

  page.appendChild(img);
  return page;
}

loadBook();

// Click to flip
document.getElementById("book").addEventListener("click", () => {
  pageFlip.flipNext();
});
</script>

</body>
</html>
